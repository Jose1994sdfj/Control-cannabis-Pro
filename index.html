<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Control Consumo Cannabis Pro</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <header>
    <h1>Control Consumo Cannabis Pro <span class="beta-badge">BETA</span></h1>
  </header>

  <!-- Navegación -->
  <div class="tabs-container">
    <!-- Barra de pestañas normal (desktop) -->
    <div class="tabs">
      <button data-tab="login-tab">Iniciar Sesión</button>
      <button data-tab="dashboard-tab" disabled>📊 Dashboard</button>
      <button data-tab="add-tab" disabled>Agregar</button>
      <button data-tab="view-tab" disabled>Registros</button>
      <button data-tab="stats-tab" disabled>Estadísticas</button>
      <button data-tab="rec-tab" disabled>Recomendaciones</button>
      <button data-tab="social-tab" disabled>Desempeño Social</button>
      <button id="themeToggle">🌙</button>
      <button id="logoutBtn" hidden>🔒 Cerrar sesión</button>
    </div>

    <!-- Menú hamburguesa (móvil) -->
    <button class="hamburger-menu" id="hamburgerBtn">
      ☰ Menú
    </button>

    <!-- Navegación móvil -->
    <div class="mobile-nav" id="mobileNav">
      <button data-tab="login-tab">🔑 Iniciar Sesión</button>
      <button data-tab="dashboard-tab" disabled>📊 Dashboard</button>
      <button data-tab="add-tab" disabled>➕ Agregar Registro</button>
      <button data-tab="view-tab" disabled>📋 Ver Registros</button>
      <button data-tab="stats-tab" disabled>📈 Estadísticas</button>
      <button data-tab="rec-tab" disabled>💡 Recomendaciones</button>
      <button data-tab="social-tab" disabled>🤝 Desempeño Social</button>
      <button id="themeToggleMobile">🌙 Cambiar Tema</button>
      <button id="logoutBtnMobile" hidden>🔒 Cerrar Sesión</button>
    </div>
  </div>

  <main>
    <!-- Iniciar sesión -->
    <section id="login-tab" class="tab active">
      <form>
        <label for="usernameInput">Nombre de usuario:</label>
        <input type="text" id="usernameInput" />
        <button type="button" id="loginBtn">Entrar</button>
        <div id="loginMsg"></div>
      </form>
    </section>

    <!-- Dashboard -->
    <section id="dashboard-tab" class="tab">
      <h2>📊 Dashboard - Resumen Ejecutivo</h2>

      <div class="dashboard-grid">
        <!-- Tarjetas de métricas -->
        <div class="metric-card">
          <h3>Total Registros</h3>
          <div class="metric-value" id="totalRegistros">0</div>
        </div>

        <div class="metric-card">
          <h3>Gasto Total</h3>
          <div class="metric-value" id="gastoTotal">$0</div>
        </div>

        <div class="metric-card">
          <h3>Consumo Total</h3>
          <div class="metric-value" id="consumoTotal">0g</div>
        </div>

        <div class="metric-card">
          <h3>Satisfacción Promedio</h3>
          <div class="metric-value" id="satisfaccionPromedio">0/10</div>
        </div>
      </div>

      <!-- Gráfico resumen en dashboard -->
      <div class="dashboard-chart">
        <h3>📈 Tendencia Últimos 30 días</h3>
        <div class="chart-container">
          <canvas id="graficoDashboard"></canvas>
        </div>
      </div>

      <!-- Exportar datos -->
      <div class="data-management">
        <h3>💾 Gestión de Datos</h3>
        <div class="export-import-buttons">
          <button id="exportPDFBtn" class="export-btn">📄 Exportar Reporte PDF</button>
        </div>
        <div id="exportMsg"></div>
      </div>
    </section>

    <!-- Agregar registro -->
    <section id="add-tab" class="tab">
      <form id="addForm">
        <label for="fecha">Fecha:</label>
        <input type="date" id="fecha" required />

        <label for="tipo">Tipo:</label>
        <select id="tipo" required>
          <option value="" disabled selected>Selecciona tipo</option>
          <option value="Índica">Índica</option>
          <option value="Sativa">Sativa</option>
          <option value="Híbrida">Híbrida</option>
          <option value="CBD dominante">CBD dominante</option>
        </select>

        <label for="proveedor">Proveedor:</label>
        <select id="proveedor" required>
          <option value="" disabled selected>Selecciona proveedor</option>
          <option value="Proveedor A">Proveedor A</option>
          <option value="Proveedor B">Proveedor B</option>
          <option value="Proveedor C">Proveedor C</option>
          <option value="Proveedor D">Proveedor D</option>
        </select>

        <label for="cantidad">Cantidad (g):</label>
        <input type="number" id="cantidad" placeholder="Cantidad (g)" min="0" step="0.1" required />

        <label for="precio">Precio total ($):</label>
        <input type="number" id="precio" placeholder="Precio total ($)" min="0" step="0.01" required />

        <label for="motivo">Motivo:</label>
        <select id="motivo" required>
          <option value="" disabled selected>Selecciona motivo</option>
          <option value="Relajación">Relajación</option>
          <option value="Medicinal">Medicinal</option>
          <option value="Recreativo">Recreativo</option>
          <option value="Creatividad">Creatividad</option>
          <option value="Dolor">Dolor</option>
          <option value="Ansiedad">Ansiedad</option>
        </select>

        <label for="metodo">Método de consumo:</label>
        <select id="metodo" required>
          <option value="" disabled selected>Selecciona método</option>
          <option value="Fumar">Fumar</option>
          <option value="Vapear">Vapear</option>
          <option value="Comestibles">Comestibles</option>
          <option value="Tinturas">Tinturas</option>
          <option value="Tópicos">Tópicos</option>
        </select>

        <label for="satisfaccion">Satisfacción (1-10):</label>
        <select id="satisfaccion" required>
          <option value="" disabled selected>Selecciona nivel</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
        </select>

        <label for="efectos">Efectos secundarios:</label>
        <input type="text" id="efectos" placeholder="Efectos secundarios" />

        <label for="consciente">Consciente:</label>
        <select id="consciente">
          <option value="true">Consciente</option>
          <option value="false">No consciente</option>
        </select>

        <button type="submit">Guardar Registro</button>
        <div id="addMsg"></div>
      </form>
    </section>

    <!-- Ver registros -->
    <section id="view-tab" class="tab">
      <input type="text" id="searchRecordsInput" placeholder="Buscar por tipo o proveedor" />
      <div id="recordsList"></div>
    </section>

    <!-- Estadísticas -->
    <section id="stats-tab" class="tab">
      <h2>📈 Satisfacción mensual</h2>
      <div class="chart-container"><canvas id="graficoSatisfaccion"></canvas></div>

      <h2>🔥 Consumo mensual (gramos)</h2>
      <div class="chart-container"><canvas id="graficoConsumoMensual"></canvas></div>

      <h2>📊 Costo promedio por gramo</h2>
      <div class="chart-container"><canvas id="graficoCostoGramo"></canvas></div>

      <h2>🧪 Frecuencia por método</h2>
      <div class="chart-container"><canvas id="graficoMetodo"></canvas></div>

      <h2>🧠 Motivo vs. Satisfacción</h2>
      <div class="chart-container"><canvas id="graficoMotivo"></canvas></div>
    </section>

    <!-- Recomendaciones -->
    <section id="rec-tab" class="tab">
      <h2>💡 Recomendaciones</h2>
      <div id="recomendacionesBox"></div>
    </section>

    <!-- Desempeño Social -->
    <section id="social-tab" class="tab">
      <h2>🤝 Desempeño Social y Calidad de Vida</h2>
      <p>Registra y analiza cómo el consumo impacta en diferentes aspectos de tu vida diaria.</p>

      <form id="socialForm">
        <div class="social-form-grid">
          <div class="social-form-column">
            <label for="interaccionesSociales">💬 Interacciones Sociales:</label>
            <select id="interaccionesSociales" required>
              <option value="" disabled selected>Selecciona nivel</option>
              <option value="1">1 - Muy pocas</option>
              <option value="2">2 - Pocas</option>
              <option value="3">3 - Escasas</option>
              <option value="4">4 - Limitadas</option>
              <option value="5">5 - Normales</option>
              <option value="6">6 - Frecuentes</option>
              <option value="7">7 - Abundantes</option>
              <option value="8">8 - Muy frecuentes</option>
              <option value="9">9 - Excelentes</option>
              <option value="10">10 - Excepcionales</option>
            </select>

            <label for="desempenoLaboral">💼 Productividad Laboral/Estudios:</label>
            <select id="desempenoLaboral" required>
              <option value="" disabled selected>Selecciona nivel</option>
              <option value="1">1 - Muy bajo</option>
              <option value="2">2 - Bajo</option>
              <option value="3">3 - Por debajo del promedio</option>
              <option value="4">4 - Ligeramente bajo</option>
              <option value="5">5 - Promedio</option>
              <option value="6">6 - Ligeramente alto</option>
              <option value="7">7 - Por encima del promedio</option>
              <option value="8">8 - Alto</option>
              <option value="9">9 - Muy alto</option>
              <option value="10">10 - Excepcional</option>
            </select>

            <label for="estadoAnimo">😊 Estado de Ánimo General:</label>
            <select id="estadoAnimo" required>
              <option value="" disabled selected>Selecciona estado</option>
              <option value="1">1 - Muy negativo</option>
              <option value="2">2 - Negativo</option>
              <option value="3">3 - Bastante negativo</option>
              <option value="4">4 - Ligeramente negativo</option>
              <option value="5">5 - Neutral</option>
              <option value="6">6 - Ligeramente positivo</option>
              <option value="7">7 - Bastante positivo</option>
              <option value="8">8 - Positivo</option>
              <option value="9">9 - Muy positivo</option>
              <option value="10">10 - Excelente</option>
            </select>
          </div>

          <div class="social-form-column">
            <label for="calidadSueno">😴 Calidad del Sueño:</label>
            <select id="calidadSueno" required>
              <option value="" disabled selected>Selecciona nivel</option>
              <option value="1">1 - Muy mala</option>
              <option value="2">2 - Mala</option>
              <option value="3">3 - Regular-</option>
              <option value="4">4 - Regular</option>
              <option value="5">5 - Aceptable</option>
              <option value="6">6 - Buena</option>
              <option value="7">7 - Muy buena</option>
              <option value="8">8 - Excelente</option>
              <option value="9">9 - Perfecta</option>
              <option value="10">10 - Excepcional</option>
            </select>

            <label for="niveleEstres">😰 Niveles de Estrés:</label>
            <select id="niveleEstres" required>
              <option value="" disabled selected>Selecciona nivel</option>
              <option value="1">1 - Sin estrés</option>
              <option value="2">2 - Muy bajo</option>
              <option value="3">3 - Bajo</option>
              <option value="4">4 - Ligeramente bajo</option>
              <option value="5">5 - Moderado</option>
              <option value="6">6 - Ligeramente alto</option>
              <option value="7">7 - Alto</option>
              <option value="8">8 - Muy alto</option>
              <option value="9">9 - Extremo</option>
              <option value="10">10 - Insostenible</option>
            </select>

            <label for="motivacionGeneral">🎯 Motivación General:</label>
            <select id="motivacionGeneral" required>
              <option value="" disabled selected>Selecciona nivel</option>
              <option value="1">1 - Sin motivación</option>
              <option value="2">2 - Muy baja</option>
              <option value="3">3 - Baja</option>
              <option value="4">4 - Ligeramente baja</option>
              <option value="5">5 - Neutra</option>
              <option value="6">6 - Ligeramente alta</option>
              <option value="7">7 - Alta</option>
              <option value="8">8 - Muy alta</option>
              <option value="9">9 - Excelente</option>
              <option value="10">10 - Inspirado</option>
            </select>
          </div>
        </div>

        <label for="notasSociales">📝 Notas adicionales (opcional):</label>
        <textarea id="notasSociales" placeholder="Comparte cualquier observación sobre tu día o cómo te sientes..."></textarea>

        <button type="submit">Guardar Evaluación de Bienestar</button>
        <div id="socialMsg"></div>
      </form>

      <div class="social-analysis">
        <h3>📊 Análisis de Tendencias</h3>
        <div class="chart-container"><canvas id="graficoSocialTendencia"></canvas></div>

        <h3>📈 Promedios Actuales</h3>
        <div class="chart-container"><canvas id="graficoSocial"></canvas></div>

        <div id="socialInsights"></div>
      </div>
    </section>
  </main>

  <footer>
    <br>
   &copy; 2025 <small>Desarrollado por <strong>JJ Solutions</strong> - Tecnología e Innovación</small> 🌿
  </footer>

  <script src="script.js"></script>
</body>
</html>